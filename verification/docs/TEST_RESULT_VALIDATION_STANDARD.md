# MAZE验证环境测试结果判断标准

## 📋 概述

本文档定义了MAZE验证环境中测试结果判断的强制性标准，**任何时候都必须强制执行**。

## 🔒 **核心原则**

### **唯一PASS标准**
**只有当所有测试用例都通过、没有任何ERROR时，才能显示[PASS]。**

- ✅ **PASS条件**: `error_count == 0` 且无任何运行时错误
- ❌ **FAIL条件**: `error_count > 0` 或出现任何ERROR/Timeout

## 📊 **测试结果标记规范**

### **SystemVerilog输出要求**
必须在测试结束时输出以下标记：

```verilog
if (error_count == 0) begin
    $display("✓ 所有基本路由功能测试通过！");
    $display("TEST_RESULT: PASS");
    $finish;
end else begin
    $display("✗ 部分基本路由功能测试失败");
    $display("失败测试数: %0d / %0d", error_count, test_count);
    $display("TEST_RESULT: FAIL");
    $finish;
end
```

### **Makefile判断逻辑**
必须基于实际测试结果显示PASS/FAIL：

```makefile
@if [ $$TEST_EXIT_CODE -eq 0 ]; then \
    echo "$(GREEN)[PASS]$(NC) 基本路由功能测试通过"; \
else \
    echo "$(RED)[FAIL]$(NC) 基本路由功能测试失败 (退出码: $$TEST_EXIT_CODE)"; \
    exit 1; \
fi
```

## 🚫 **禁止行为**

### **绝对禁止**
1. **无条件显示PASS** - 任何时候都不能无条件显示`[PASS]`
2. **忽略错误结果** - 不能忽略任何ERROR或Timeout
3. **虚假成功报告** - 不能在测试失败时报告成功

### **代码检查清单**
- [ ] 测试台有正确的统计逻辑（pass_count, error_count）
- [ ] 输出包含TEST_RESULT标记
- [ ] Makefile检查退出码
- [ ] 失败时显示[FAIL]并退出非零码

## 📈 **测试输出规范**

### **成功输出示例**
```
==============================================
测试总结
==============================================
总测试数: 5
通过测试: 5
失败测试: 0
通过率: 100.00%
✓ 所有基本路由功能测试通过！
TEST_RESULT: PASS
==============================================
[PASS] 基本路由功能测试通过
```

### **失败输出示例**
```
==============================================
测试总结
==============================================
总测试数: 5
通过测试: 0
失败测试: 5
通过率: 0.00%
✗ 部分基本路由功能测试失败
失败测试数: 5 / 5
TEST_RESULT: FAIL
==============================================
[FAIL] 基本路由功能测试失败 (退出码: 0)
```

## 🔍 **验证方法**

### **自动检查**
使用脚本验证测试结果判断逻辑：
```bash
# 运行测试并检查结果
make test-quick

# 应该在有错误时显示[FAIL]，无错误时显示[PASS]
```

### **手动检查**
1. 确认有ERROR时不显示PASS
2. 确认无ERROR时显示PASS
3. 检查失败时make退出非零码

## 📚 **相关文件**

- **SystemVerilog测试台**: `testbench/integration_tests/*/simple_test.sv`
- **Makefile**: `Makefile` (test-node-basic目标)
- **文件结构规范**: `docs/FILE_STRUCTURE_STANDARD.md`

## ⚠️ **重要提醒**

**此标准为强制性文档，任何时候都必须严格遵守！**

- **违反后果**：错误报告测试结果，误导开发决策
- **检查频率**：每次提交前必须验证测试结果判断逻辑
- **责任**：修改测试代码的开发者必须确保结果判断正确

**只有在真正解决所有测试问题后，才能看到[PASS]输出！**